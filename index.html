<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <title>Movie tickets</title>
    </head>
    <body ng-app="App">

        <div class="container" ng-controller="mainController">

            <h1>Best movie ticket booking system ever</h1>
            
            <!-- menu buttons -->
            <div class="btn-group">
                <button type="button" class="btn btn-primary" 
                ng-model="choosingCinema" ng-click="getCinemas()">
                        Book tickets
                </button>
                        
                <button type="button" class="btn" 
                ng-model="cancelling" ng-click="cancelling = true">
                        Cancel a booking
                </button>
            </div>

            <form ng-if="choosingCinema">

                <!-- choose cinema -->
                <pre>{{cinemas | json}}</pre>
                <div class="form-group">
                    <label for="Cinemas">Choose a cinema location</label>
                        <select class="form-control" id="cinemaSelector" 
                                ng-model="cinemaSelect" 
                                ng-change="selectCinema(cinemaSelect)"
                                ng-options="cinema as cinema.name for cinema in cinemas track by cinema.id">
                            <option value="">-- choose cinema --</option>
                        </select>
                </div>

                <!-- choose movie -->
                <div class="form-group" ng-if="cinemaSelected" ng-model="movieSelect">
                    <p>You selected: {{cinemaSelect.name}}, id: {{ cinemaSelect.id }}</p>
                    <label for="Movies">Choose a movie</label>
                        <select class="form-control" id="movieSelector" 
                                ng-model="movieSelect"
                                ng-change="selectMovie(cinemaSelect, movieSelect)"
                                ng-options="movie as movie.title for movie in movies track by movie.id">
                            <option value="">-- choose movie --</option>
                        </select>
                        <!-- <pre>{{movies | json}}</pre> -->
                </div>

                <!-- choose screening -->
                <div class="form-group" ng-if="movieSelected" ng-model="screeningSelect">
                    <p>You selected: {{selectedMovie.title}}, id: {{ selectedMovie.id }}</p>
                    <pre>{{screenings | json}}</pre>
                    <label for="Screenings">Pick a screening.</label>
                        <select class="form-control" id="screeningSelector" 
                                ng-model="screeningSelect"
                                ng-change="selectScreening(screeningSelect)"
                                ng-options="screening as screening.date for screening in screenings track by screening.id">
                            <option value="">-- choose screening --</option>
                        </select>
                        
                </div>


            <div ng-if="chosenScreening">
                <label for="Seats">Choose your seats</label>
                <select class="form-control" id="chosenSeats" 
                ng-model="chosenSeats" 
                ng-options="seats as seat.number for seat in seats track by $index">
                </select>
                <p>1 seat already booked.</p>
                </div>

                <!-- enter details and make booking -->
                <div ng-if="chosenSeats">
                    <fieldset>
                        <legend>Your details</legend>
                        <div class="field">
                        <label>Name</label>
                        <div class="two fields">
                            <div class="field">
                            <input type="text" name="personal[first-name]" placeholder="First name">
                            </div>
                            <div class="field">
                            <input type="text" name="personal[last-name]" placeholder="Last name">
                            </div>
                        </div>
                        </div>
                        <div class="field">
                        <label>Mobile number</label>
                        <div class="fields">
                            <div class="twelve wide field">
                            <input type="text" name="personal[mobile]" placeholder="Mobile number">
                            </div>
                        </div>
                        </div>
                    </fieldset>
                    <fieldset>
                        <label>Billing details</label>
                        <div class="field">
                            <label>Card Type</label>
                            <div class="selection dropdown">
                            <input type="hidden" name="card[type]">
                            <div class="default text">Type</div>
                            <i class="dropdown icon"></i>
                                <div class="menu">
                                    <div class="item" data-value="visa">
                                        Visa
                                    </div>
                                    <div class="item" data-value="mastercard">
                                        Mastercard
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="fields">
                            <div class="seven wide field">
                            <label>Card Number</label>
                            <input type="text" name="card[number]" maxlength="16" placeholder="Card #">
                            </div>
                            <div class="three wide field">
                            <label>CVC</label>
                            <input type="text" name="card[cvc]" maxlength="3" placeholder="CVC">
                            </div>
                            <div class="six wide field">
                            <label>Expiration</label>
                            <div class="two fields">
                                <div class="field">
                                <select class="fluid search dropdown" name="card[expire-month]">
                                    <option value="">Month</option>
                                    <option value="1">January</option>
                                    <option value="2">February</option>
                                    <option value="3">March</option>
                                    <option value="4">April</option>
                                    <option value="5">May</option>
                                    <option value="6">June</option>
                                    <option value="7">July</option>
                                    <option value="8">August</option>
                                    <option value="9">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>
                                </div>
                                <div class="field">
                                <input type="text" name="card[expire-year]" maxlength="4" placeholder="Year">
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="button" tabindex="0">Submit and pay</div>
                    </fieldset>    
                </div>

                <!-- confirmation -->
                <div class="alert alert-success" role="alert"
                    ng-if="detailsSubmitted"> 
                    <p><strong>Your booking was completed successfully.</strong></p>
                    <p>Booking ref etc will show here.</p>
                </div>

            </form>
        </div>    

        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    </body>
    <script type="text/javascript" src="./node_modules/angular/angular.js"></script>
    <script type="text/javascript" src="./app.js"></script>
</html>